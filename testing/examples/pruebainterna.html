<!DOCTYPE html>
<html>
<!-- include three.js -->
<script src='vendor/three.js/build/three.js'></script>
<script src='OBJLoader.js'></script>
<script src='vendor/three.js/examples/js/libs/stats.min.js'></script>

<!-- include js-aruco -->
<script src='../vendor/js-aruco/svd.js'></script>
<script src='../vendor/js-aruco/posit1-patched.js'></script>
<script src='../vendor/js-aruco/cv.js'></script>
<script src='../vendor/js-aruco/aruco.js'></script>

<!-- include some extensions -->
<script src='../threex.webcamgrabbing.js'></script>
<script src='../threex.imagegrabbing.js'></script>
<script src='../threex.videograbbing.js'></script>
<script src='../threex.jsarucomarker.js'></script>

<head>
  <title>
    MappacheCo.
  </title>
  <style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
	</style>
</head>

<body style='margin: 0px; overflow: hidden;'>
  <h1>Mappache co. Testing Environment</h1>
  <!--<div id='info' style='position: absolute; top: 0px; width: 100%;font-family:arial; font-weight: bolder; padding-top: 5px; text-align:center;'>
    No te pide acceso a la camara? Haz click aca:
  	<a class='webcam' href='javascript:void();'>webcam</a>
  </div>-->
  <script>


/*/////////////////////////////////////////////////////////////////////////////////
//		Handle ui button //// que te acceda a la camara cuando cliqueas en 'webcam'
//////////////////////////////////////////////////////////////////////////////////
document.querySelector('#info .webcam').addEventListener('click', function(event){
  location.hash	= '#webcam'
  location.reload()
})*/

//////////////////////////////////////////////////////////////////////////////////
//		Init - esto es tal cual la documentacion basica de THREE.
//////////////////////////////////////////////////////////////////////////////////
var container = document.createElement( 'div' );
document.body.appendChild( container );
var scene = new THREE.Scene()
var ambient = new THREE.AmbientLight( 0x101030 );
				scene.add( ambient );
        var directionalLight = new THREE.DirectionalLight( 0xffeedd );
        				directionalLight.position.set( 0, 0, 1 );
        				scene.add( directionalLight );
var camera	= new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.01, 1000);
camera.position.z = 5;
// init renderer
var renderer	= new THREE.WebGLRenderer({
  antialias	: true,
  alpha		: true,
});
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );

// array of functions for the rendering loop
var onRenderFcts = [];

// init scene and camera

//////////////////////////// agrega un cubo
/*/ instantiate a loader
var loader = new THREE.OBJLoader();
// load a resource
  loader.load(
  // resource URL
  'images/mamappache.obj',
  // Function when resource is loaded
  function ( object ) {
    scene.add( object );
  }
);// loaded el logo */

/*var geometry = new THREE.BoxGeometry( 1, 1, 1 );
			var material = new THREE.MeshBasicMaterial( { color: 0x66cdaa } ); //66CDAA
			var cube = new THREE.Mesh( geometry, material );
			scene.add( cube );*/ ////////////devuelve mi cubo hermoso!



////////////////////////////////
// objects, loads an OBJ
// texture

				var manager = new THREE.LoadingManager();
				manager.onProgress = function ( item, loaded, total ) {

					console.log( item, loaded, total );

				};

			/*	var texture = new THREE.Texture();

				var onProgress = function ( xhr ) {
					if ( xhr.lengthComputable ) {
						var percentComplete = xhr.loaded / xhr.total * 100;
						console.log( Math.round(percentComplete, 2) + '% downloaded' );
					}
				};

				var onError = function ( xhr ) {
				};


				var loader = new THREE.ImageLoader( manager );
				loader.load( 'images/mappache2.png', function ( image ) {

					texture.image = image;
					texture.needsUpdate = true;

				} );*/
        // model

        				var loader = new THREE.OBJLoader( manager );
        				loader.load( 'images/mamappache.obj', function ( object ) {

        					object.traverse( function ( child ) {

        						if ( child instanceof THREE.Mesh ) {

        							child.material.map = texture;

        						}

        					} );

        					object.position.y = - 95;
        					scene.add( object );

        				}, onProgress, onError );
////////////////////// renderiza todo.
var render = function () {
				requestAnimationFrame( render );

				//cube.rotation.x += 0.1;
				//cube.rotation.y += 0.06;
        object.rotation.y += 0.06;

				renderer.render(scene, camera);
			};
render();

</script>
</body>
</html>
